<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Diagnostic Assessment | Acumen Logic</title>
    <meta name="description" content="20 questions, 25 minutes. Identify your specific weaknesses in Numerical Reasoning, Data Interpretation, and Logical Reasoning before your Big 4 or investment banking assessment.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    <script src="assets/js/main.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: {
                            50: '#f0f3f7',
                            100: '#dae1eb',
                            200: '#b8c5d4',
                            300: '#8da3ba',
                            400: '#5d7a99',
                            500: '#3d5a7a',
                            600: '#2d4561',
                            700: '#1b263b',
                            800: '#151e2f',
                            900: '#0f1624',
                            950: '#0a0f18',
                        },
                        gold: {
                            50: '#faf6ef',
                            100: '#f3ebdb',
                            200: '#e6d4b5',
                            300: '#d6ba8a',
                            400: '#c9a961',
                            500: '#b8935e',
                            600: '#a17a4a',
                            700: '#86633d',
                            800: '#6e5035',
                            900: '#5a422d',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        display: ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-text {
            background: linear-gradient(135deg, #C9A961 0%, #f4e5c2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .geometric-pattern {
            background-image: radial-gradient(circle at 2px 2px, rgba(201, 169, 97, 0.15) 1px, transparent 0);
            background-size: 40px 40px;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(201, 169, 97, 0.1);
        }
        .timer-warning {
            animation: pulse-red 1s infinite;
        }
        @keyframes pulse-red {
            0%, 100% { color: #ef4444; }
            50% { color: #f87171; }
        }
    </style>
</head>
<body class="bg-navy-900 text-slate-100 font-sans antialiased selection:bg-gold-400 selection:text-navy-900">
    
    <!-- Navigation -->
    <nav id="navbar" class="fixed w-full bg-white/95 backdrop-blur-md border-b border-navy-100/50 z-50 transition-all duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="/" class="flex items-center gap-3 group">
                    <div class="relative">
                        <img src="assets/images/logo.png" width="42" height="42" alt="Acumen Logic" class="relative z-10 transition-transform duration-300 group-hover:scale-105">
                    </div>
                    <div>
                        <span class="font-display text-xl font-bold text-navy-700 tracking-tight">Acumen Logic</span>
                        <span class="hidden sm:block text-xs text-gold-400 font-medium tracking-wide">Precision Training</span>
                    </div>
                </a>
                
                <div class="hidden md:flex items-center gap-10">
                    <a href="/" class="text-sm font-medium text-navy-600 hover:text-gold-400 transition-colors duration-300">Home</a>
                    <a href="methodology" class="text-sm font-medium text-navy-600 hover:text-gold-400 transition-colors duration-300">Methodology</a>
                    <a href="products" class="text-sm font-medium text-navy-600 hover:text-gold-400 transition-colors duration-300">Products</a>
                    <a href="blog/" class="text-sm font-medium text-navy-600 hover:text-gold-400 transition-colors duration-300">Blog</a>
                    <a href="about" class="text-sm font-medium text-navy-600 hover:text-gold-400 transition-colors duration-300">About</a>
                </div>
                
                <div class="flex items-center gap-4">
                    <a href="https://app.acumenlogic.co.uk/register.html" class="bg-navy-700 hover:bg-navy-800 text-white px-6 py-3 rounded-lg font-semibold text-sm transition-all duration-300 shadow-lg shadow-navy-700/20 hover:shadow-xl hover:shadow-navy-700/25 hover:-translate-y-0.5">
                        Try Free Benchmark
                    </a>
                    <button class="md:hidden text-navy-700" data-mobile-menu-button aria-expanded="false" aria-controls="mobileMenu">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-navy-100">
            <div class="px-4 py-6 space-y-4">
                <a href="/" class="block text-navy-600 hover:text-gold-500">Home</a>
                <a href="methodology" class="block text-navy-600 hover:text-gold-500">Methodology</a>
                <a href="products" class="block text-navy-600 hover:text-gold-500">Products</a>
                <a href="blog/" class="block text-navy-600 hover:text-gold-500">Blog</a>
                <a href="about" class="block text-navy-600 hover:text-gold-500">About</a>
            </div>
        </div>
    </nav>

    <!-- Landing State -->
    <section id="landing" class="pt-32 pb-20 min-h-screen bg-navy-900 geometric-pattern">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <span class="text-gold-400 font-semibold tracking-widest uppercase text-sm">Free Assessment</span>
                <h1 class="font-display text-5xl lg:text-6xl font-bold text-white mt-4 mb-6">The Finance Aptitude Diagnostic</h1>
                <p class="text-xl text-slate-300 max-w-2xl mx-auto">20 questions. 25 minutes. Numerical Reasoning, Data Interpretation, and Logical Reasoning. Discover which category is your bottleneck.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-6 mb-12">
                <div class="glass-effect rounded-xl p-6 text-center border border-gold-400/10">
                    <div class="w-12 h-12 mx-auto mb-4 rounded-full bg-gold-400/10 flex items-center justify-center">
                        <i data-lucide="timer" class="w-6 h-6 text-gold-400"></i>
                    </div>
                    <h3 class="font-semibold text-white mb-1">25 Minutes</h3>
                    <p class="text-sm text-slate-400">Timed conditions mirror real assessment pressure</p>
                </div>
                <div class="glass-effect rounded-xl p-6 text-center border border-gold-400/10">
                    <div class="w-12 h-12 mx-auto mb-4 rounded-full bg-gold-400/10 flex items-center justify-center">
                        <i data-lucide="bar-chart-2" class="w-6 h-6 text-gold-400"></i>
                    </div>
                    <h3 class="font-semibold text-white mb-1">X/5 Scoring</h3>
                    <p class="text-sm text-slate-400">Per category breakdown, not just overall score</p>
                </div>
                <div class="glass-effect rounded-xl p-6 text-center border border-gold-400/10">
                    <div class="w-12 h-12 mx-auto mb-4 rounded-full bg-gold-400/10 flex items-center justify-center">
                        <i data-lucide="mail" class="w-6 h-6 text-gold-400"></i>
                    </div>
                    <h3 class="font-semibold text-white mb-1">Instant Results</h3>
                    <p class="text-sm text-slate-400">Email with category analysis and next steps</p>
                </div>
            </div>

            <div class="glass-effect rounded-2xl p-8 border border-gold-400/20 max-w-2xl mx-auto">
                <h2 class="font-display text-2xl font-bold text-white mb-6 text-center">Begin Your Assessment</h2>
                <form id="startForm" onsubmit="startAssessment(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-1">Full Name</label>
                        <input type="text" id="userName" required class="w-full px-4 py-3 rounded-lg bg-navy-800 border border-gold-400/20 text-white focus:border-gold-400 focus:outline-none transition-colors" placeholder="Enter your full name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-1">Email Address</label>
                        <input type="email" id="userEmail" required class="w-full px-4 py-3 rounded-lg bg-navy-800 border border-gold-400/20 text-white focus:border-gold-400 focus:outline-none transition-colors" placeholder="your@email.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-1">Target Firm (Optional)</label>
                        <select id="targetFirm" class="w-full px-4 py-3 rounded-lg bg-navy-800 border border-gold-400/20 text-white focus:border-gold-400 focus:outline-none transition-colors">
                            <option value="">Select firm...</option>
                            <option value="kpmg">KPMG</option>
                            <option value="deloitte">Deloitte</option>
                            <option value="pwc">PwC</option>
                            <option value="ey">EY</option>
                            <option value="goldman">Goldman Sachs</option>
                            <option value="barclays">Barclays</option>
                            <option value="jpmorgan">JP Morgan</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="flex items-start gap-3 pt-2">
                        <input type="checkbox" id="marketingConsent" class="mt-1 w-4 h-4 rounded border-gold-400/20 bg-navy-800 text-gold-400 focus:ring-gold-400">
                        <label for="marketingConsent" class="text-sm text-slate-400">I agree to receive diagnostic results and follow-up emails about the training programme. Unsubscribe anytime.</label>
                    </div>
                    <button type="submit" class="w-full py-4 bg-gold-400 text-navy-900 font-bold text-lg rounded hover:bg-gold-500 transition-colors">
                        Start Diagnostic
                    </button>
                </form>
                <p class="text-xs text-slate-500 text-center mt-4">By starting, you agree to our Terms of Service and Privacy Policy.</p>
            </div>
        </div>
    </section>

    <!-- Assessment Interface (Hidden initially) -->
    <section id="assessment" class="hidden pt-24 pb-8 min-h-screen bg-navy-900">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Progress Header -->
            <div class="sticky top-24 z-40 bg-navy-800/95 backdrop-blur rounded-xl p-4 mb-6 border border-gold-400/10">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-4">
                        <span class="text-sm text-slate-400">Question <span id="currentQ" class="text-white font-bold">1</span>/20</span>
                        <div class="w-32 h-2 bg-navy-900 rounded-full overflow-hidden">
                            <div id="progressBar" class="h-full bg-gold-400 transition-all duration-300" style="width: 5%"></div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 font-mono text-xl font-bold text-gold-400" id="timer">
                        25:00
                    </div>
                </div>
                <div class="flex gap-2 text-xs">
                    <span id="cat-nr" class="px-2 py-1 rounded bg-gold-400/20 text-gold-400">NR</span>
                    <span id="cat-di" class="px-2 py-1 rounded bg-navy-900 text-slate-500">DI</span>
                    <span id="cat-lr" class="px-2 py-1 rounded bg-navy-900 text-slate-500">LR</span>
                </div>
            </div>

            <!-- Question Container -->
            <div id="questionContainer" class="glass-effect rounded-2xl p-8 border border-gold-400/10">
                <!-- Dynamic content loaded here -->
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="prevQuestion()" id="prevBtn" class="px-6 py-3 border border-gold-400/20 text-slate-300 rounded hover:border-gold-400 hover:text-gold-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    Previous
                </button>
                <button onclick="nextQuestion()" id="nextBtn" class="px-6 py-3 bg-gold-400 text-navy-900 font-semibold rounded hover:bg-gold-500 transition-colors">
                    Next Question
                </button>
            </div>
        </div>
    </section>

    <!-- Results (Hidden initially) -->
    <section id="results" class="hidden pt-32 pb-20 min-h-screen bg-navy-900 geometric-pattern">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="w-20 h-20 mx-auto rounded-full bg-green-400/10 flex items-center justify-center mb-6">
                <i data-lucide="check-circle" class="w-10 h-10 text-green-400"></i>
            </div>
            <h1 class="font-display text-4xl font-bold text-white mb-4">Assessment Complete</h1>
            <p class="text-slate-300 mb-8">Your category breakdown has been calculated. Check your email for detailed analysis.</p>

            <div class="glass-effect rounded-2xl p-8 border border-gold-400/20 mb-8">
                <h2 class="font-display text-2xl font-bold text-white mb-6">Your Results</h2>
                
                <div class="grid grid-cols-3 gap-4 mb-6">
                    <div class="p-4 bg-navy-800 rounded-lg border border-gold-400/10">
                        <p class="text-xs text-slate-500 uppercase tracking-wide mb-1">Numerical</p>
                        <p class="text-3xl font-bold text-gold-400 font-display" id="nrScore">-/5</p>
                        <p class="text-xs text-slate-400 mt-1" id="nrLabel">Calculating...</p>
                    </div>
                    <div class="p-4 bg-navy-800 rounded-lg border border-gold-400/10">
                        <p class="text-xs text-slate-500 uppercase tracking-wide mb-1">Data</p>
                        <p class="text-3xl font-bold text-gold-400 font-display" id="diScore">-/5</p>
                        <p class="text-xs text-slate-400 mt-1" id="diLabel">Calculating...</p>
                    </div>
                    <div class="p-4 bg-navy-800 rounded-lg border border-gold-400/10">
                        <p class="text-xs text-slate-500 uppercase tracking-wide mb-1">Logical</p>
                        <p class="text-3xl font-bold text-gold-400 font-display" id="lrScore">-/5</p>
                        <p class="text-xs text-slate-400 mt-1" id="lrLabel">Calculating...</p>
                    </div>
                </div>

                <div class="p-6 bg-gold-400/5 rounded-lg border border-gold-400/20 text-left">
                    <h3 class="font-semibold text-white mb-2">Your Focus Area:</h3>
                    <p class="text-slate-300 text-sm mb-4" id="focusArea">Identifying your weakest category...</p>
                    <a href="masterclass" class="inline-block px-6 py-3 bg-gold-400 text-navy-900 font-semibold rounded hover:bg-gold-500 transition-colors">
                        View Training Programme
                    </a>
                </div>
            </div>

            <div class="space-y-4">
                <button onclick="reviewAnswers()" class="px-6 py-3 border border-gold-400/20 text-gold-400 rounded hover:bg-gold-400/5 transition-colors">
                    Review Answers
                </button>
                <p class="text-xs text-slate-500">Detailed explanations of correct answers available in review mode</p>
            </div>
        </div>
    </section>

    <!-- Review Mode (Hidden initially) -->
    <section id="review" class="hidden pt-24 pb-8 min-h-screen bg-navy-900">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between mb-8">
                <h2 class="font-display text-2xl font-bold text-white">Review Mode</h2>
                <button onclick="closeReview()" class="px-4 py-2 text-slate-400 hover:text-white transition-colors">
                    Close Review
                </button>
            </div>
            <div id="reviewContainer" class="space-y-6">
                <!-- Review content loaded here -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-navy-950 text-navy-300 py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-12 mb-16">
                <div class="col-span-2">
                    <div class="flex items-center gap-3 mb-6">
                        <span class="font-display text-xl font-bold text-white">Acumen Logic</span>
                    </div>
                    <p class="leading-relaxed max-w-sm">
                        Precision training for finance aptitude assessments. Built by Nicholas for candidates targeting Big 4, investment banking, and consulting roles.
                    </p>
                    <p class="mt-4 text-sm"><a href="mailto:enquiries@acumenlogic.co.uk" class="inline-flex items-center gap-2 hover:text-gold-400 transition-colors"><i data-lucide="mail" class="w-4 h-4"></i><span>enquiries@acumenlogic.co.uk</span></a></p>
                </div>

                <div>
                    <h4 class="text-white font-semibold mb-5">Programme</h4>
                    <ul class="space-y-3">
                        <li><a href="products" class="hover:text-gold-400 transition-colors">Products</a></li>
                        <li><a href="methodology" class="hover:text-gold-400 transition-colors">Methodology</a></li>
                        <li><a href="blog/" class="hover:text-gold-400 transition-colors">Blog</a></li>
                        <li><a href="about" class="hover:text-gold-400 transition-colors">About</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-white font-semibold mb-5">Legal</h4>
                    <ul class="space-y-3">
                        <li><a href="pages/privacy" class="hover:text-gold-400 transition-colors">Privacy Policy</a></li>
                        <li><a href="pages/terms" class="hover:text-gold-400 transition-colors">Terms of Service</a></li>
                        <li><a href="pages/cookies" class="hover:text-gold-400 transition-colors">Cookies</a></li>
                        <li><a href="pages/disclaimer" class="hover:text-gold-400 transition-colors">Disclaimer</a></li>
                        <li><a href="pages/refund" class="hover:text-gold-400 transition-colors">Refund Policy</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-navy-800 pt-10 flex flex-col items-center gap-4">
                <p class="text-sm text-navy-500">&copy; <span data-year></span> Acumen Logic. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="assets/js/questions.js"></script>
    <script>
        // State
        let currentQuestion = 1;
        let timeRemaining = 1500; // 25 minutes
        let timer;
        let answers = {};
        let userData = {};

        // Question sequence: NR, DI, LR, NR, DI, LR... (20 questions total: 7 NR, 7 DI, 6 LR)
        const questionSequence = [
            1, 8, 15, 2, 9, 16, 3, 10, 17, 4, 11, 18, 5, 12, 19, 6, 13, 20, 7, 14
        ];

        function startAssessment(e) {
            e.preventDefault();
            
            userData = {
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                firm: document.getElementById('targetFirm').value,
                consent: document.getElementById('marketingConsent').checked,
                timestamp: new Date().toISOString()
            };

            // Store in session
            sessionStorage.setItem('acumenUser', JSON.stringify(userData));

            // Switch views
            document.getElementById('landing').classList.add('hidden');
            document.getElementById('assessment').classList.remove('hidden');
            document.getElementById('footer').classList.add('hidden');

            // Start timer
            startTimer();
            
            // Load first question
            loadQuestion(1);
        }

        function startTimer() {
            timer = setInterval(() => {
                timeRemaining--;
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                const timerEl = document.getElementById('timer');
                
                timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeRemaining <= 120) { // Warning at 2 minutes
                    timerEl.classList.add('timer-warning');
                }
                
                if (timeRemaining <= 0) {
                    finishAssessment();
                }
            }, 1000);
        }

        function getCategory(questionNum) {
            const idx = (questionNum - 1) % 3;
            return ['NR', 'DI', 'LR'][idx];
        }

        function loadQuestion(qNum) {
            currentQuestion = qNum;
            const questionId = questionSequence[qNum - 1];
            const question = questions.find(q => q.id === questionId);
            const category = getCategory(qNum);

            // Update progress
            document.getElementById('currentQ').textContent = qNum;
            document.getElementById('progressBar').style.width = `${(qNum / 20) * 100}%`;
            
            // Update category indicators
            document.getElementById('cat-nr').className = category === 'NR' ? 'px-2 py-1 rounded bg-gold-400/20 text-gold-400' : 'px-2 py-1 rounded bg-navy-900 text-slate-500';
            document.getElementById('cat-di').className = category === 'DI' ? 'px-2 py-1 rounded bg-gold-400/20 text-gold-400' : 'px-2 py-1 rounded bg-navy-900 text-slate-500';
            document.getElementById('cat-lr').className = category === 'LR' ? 'px-2 py-1 rounded bg-gold-400/20 text-gold-400' : 'px-2 py-1 rounded bg-navy-900 text-slate-500';

            // Update buttons
            document.getElementById('prevBtn').disabled = qNum === 1;
            document.getElementById('nextBtn').textContent = qNum === 20 ? 'Finish' : 'Next Question';

            // Render question
            const container = document.getElementById('questionContainer');
            let html = `
                <div class="mb-6">
                    <span class="text-xs font-semibold text-gold-400 uppercase tracking-wide">${question.category}</span>
                    <h3 class="text-lg font-medium text-white mt-2 leading-relaxed">${question.text}</h3>
                </div>
            `;

            if (question.table) {
                html += `
                    <div class="mb-6 overflow-x-auto">
                        <table class="w-full text-sm border-collapse">
                            <thead>
                                <tr class="border-b border-gold-400/20">
                                    ${question.table.headers.map(h => `<th class="text-left py-2 px-3 text-slate-400 font-medium">${h}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${question.table.rows.map(row => `
                                    <tr class="border-b border-gold-400/10">
                                        ${row.map(cell => `<td class="py-2 px-3 text-white font-mono">${cell}</td>`).join('')}
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }

            html += `<div class="space-y-3">`;
            question.options.forEach((opt, idx) => {
                const selected = answers[questionId] === idx ? 'border-gold-400 bg-gold-400/10' : 'border-gold-400/20 hover:border-gold-400/50';
                html += `
                    <button onclick="selectAnswer(${questionId}, ${idx})" class="w-full p-4 text-left rounded border ${selected} transition-all text-slate-300 hover:text-white">
                        <span class="font-medium">${String.fromCharCode(65 + idx)}.</span> ${opt}
                    </button>
                `;
            });
            html += `</div>`;

            container.innerHTML = html;
        }

        function selectAnswer(questionId, optionIdx) {
            answers[questionId] = optionIdx;
            loadQuestion(currentQuestion); // Re-render to show selection
        }

        function prevQuestion() {
            if (currentQuestion > 1) {
                loadQuestion(currentQuestion - 1);
            }
        }

        function nextQuestion() {
            if (currentQuestion < 20) {
                loadQuestion(currentQuestion + 1);
            } else {
                finishAssessment();
            }
        }

        function finishAssessment() {
            clearInterval(timer);
            
            // Calculate scores
            let nrCorrect = 0, diCorrect = 0, lrCorrect = 0;
            let nrTotal = 0, diTotal = 0, lrTotal = 0;

            questionSequence.forEach((qId, idx) => {
                const q = questions.find(question => question.id === qId);
                const cat = getCategory(idx + 1);
                const correct = answers[qId] === q.correct;

                if (cat === 'NR') {
                    nrTotal++;
                    if (correct) nrCorrect++;
                } else if (cat === 'DI') {
                    diTotal++;
                    if (correct) diCorrect++;
                } else {
                    lrTotal++;
                    if (correct) lrCorrect++;
                }
            });

            const results = {
                nr: nrCorrect,
                di: diCorrect,
                lr: lrCorrect,
                total: nrCorrect + diCorrect + lrCorrect,
                answers: answers,
                user: userData,
                timeRemaining: timeRemaining
            };

            sessionStorage.setItem('acumenResults', JSON.stringify(results));

            // Send to Zapier (webhook)
            sendToZapier(results);

            // Show results
            showResults(results);
        }

        function sendToZapier(results) {
            // TODO: Replace with your actual Zapier webhook URL
            const webhookUrl = 'YOUR_ZAPIER_WEBHOOK_URL_HERE';
            
            const payload = {
                name: results.user.name,
                email: results.user.email,
                firm: results.user.firm,
                consent: results.user.consent,
                nr_score: results.nr,
                di_score: results.di,
                lr_score: results.lr,
                total_score: results.total,
                timestamp: results.user.timestamp
            };

            fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            }).catch(err => console.log('Webhook logged for retry'));
        }

        function showResults(results) {
            document.getElementById('assessment').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');

            document.getElementById('nrScore').textContent = `${results.nr}/7`;
            document.getElementById('diScore').textContent = `${results.di}/7`;
            document.getElementById('lrScore').textContent = `${results.lr}/6`;

            // Determine strength/weakness
            const nrStrength = results.nr >= 4 ? 'Strong' : 'Weak';
            const diStrength = results.di >= 4 ? 'Strong' : 'Weak';
            const lrStrength = results.lr >= 4 ? 'Strong' : 'Weak';

            document.getElementById('nrLabel').textContent = nrStrength;
            document.getElementById('diLabel').textContent = diStrength;
            document.getElementById('lrLabel').textContent = lrStrength;

            // Find weakest
            const scores = [
                { cat: 'Numerical Reasoning', score: results.nr, max: 7, strength: nrStrength },
                { cat: 'Data Interpretation', score: results.di, max: 7, strength: diStrength },
                { cat: 'Logical Reasoning', score: results.lr, max: 6, strength: lrStrength }
            ];
            
            const weakest = scores.sort((a, b) => (a.score/a.max) - (b.score/b.max))[0];
            
            document.getElementById('focusArea').innerHTML = 
                `Your <strong class="text-gold-400">${weakest.cat}</strong> score (${weakest.score}/${weakest.max}) indicates this is your primary bottleneck. ` +
                `The training programme includes targeted modules to strengthen this specific area.`;

            lucide.createIcons();
        }

        function reviewAnswers() {
            document.getElementById('results').classList.add('hidden');
            document.getElementById('review').classList.remove('hidden');

            const container = document.getElementById('reviewContainer');
            const results = JSON.parse(sessionStorage.getItem('acumenResults'));
            
            let html = '';
            questionSequence.forEach((qId, idx) => {
                const q = questions.find(question => question.id === qId);
                const userAnswer = results.answers[qId];
                const isCorrect = userAnswer === q.correct;
                const category = getCategory(idx + 1);

                html += `
                    <div class="glass-effect rounded-xl p-6 border ${isCorrect ? 'border-green-400/20' : 'border-red-400/20'}">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <span class="text-xs font-semibold text-gold-400 uppercase tracking-wide">Q${idx + 1} â€¢ ${category}</span>
                                <p class="text-white mt-1">${q.text}</p>
                            </div>
                            ${isCorrect 
                                ? '<span class="px-3 py-1 rounded-full bg-green-400/10 text-green-400 text-xs font-semibold">Correct</span>'
                                : '<span class="px-3 py-1 rounded-full bg-red-400/10 text-red-400 text-xs font-semibold">Incorrect</span>'
                            }
                        </div>
                        
                        <div class="space-y-2 mb-4">
                            ${q.options.map((opt, i) => {
                                let classes = 'p-3 rounded border text-sm ';
                                if (i === q.correct) {
                                    classes += 'border-green-400 bg-green-400/10 text-green-400';
                                } else if (i === userAnswer && !isCorrect) {
                                    classes += 'border-red-400 bg-red-400/10 text-red-400';
                                } else {
                                    classes += 'border-gold-400/10 text-slate-400';
                                }
                                return `<div class="${classes}">${String.fromCharCode(65 + i)}. ${opt}</div>`;
                            }).join('')}
                        </div>

                        <div class="p-4 bg-navy-800 rounded-lg">
                            <p class="text-sm text-slate-300"><strong class="text-gold-400">Explanation:</strong> ${q.explanation}</p>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            lucide.createIcons();
        }

        function closeReview() {
            document.getElementById('review').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
        }

        // Initialize
        lucide.createIcons();
    </script>
</body>
</html>